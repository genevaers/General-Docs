# REH file overview {#SACREH .concept}

## 01 Summary of this topic {#01 .section}

The sections in this topic are as follows:

-   [10 What is an REH file?](SACREH.md#10)
-   [20 Example REH file](SACREH.md#20)
-   [30 How is a REH file created?](SACREH.md#30)
-   [40 Processing for REH files](SACREH.md#40)
-   [50 JCL for an REH file](SACREH.md#50)
-   [60 COBOL copybook member for REH file](SACREH.md#60)
-   [100 Need more on this page?](SACREH.md#100)

## 10 What is an REH file? {#10 .section}

REH file = **Reference Extract Header file**.

This topic assumes you are familiar with topic "**Lookup path overview**". A link to that overview is under **Related concepts** below.

An REH file is a file generated by SAFR to identify the RED file relevant for each step in each lookup path in the extract phase. There is at most one REH file for a run of PE. If there are no lookup paths used in the extract phase, then this file is not created.

A RED file is a file also generated by SAFR to ensure fast processing for a particular step in a lookup path. The are often many RED files created for a run of PE.

MR95 \(in the extract phase\) is the program that reads both the REH file and multiple RED files and performs all lookup path processing for that phase. All RED files and the REH file are stored in memory, which means lookups in MR95 avoid slow input/output operations on reference files.

For a more detailed description of RED and REH files, see topic "**RED file overview**". A link to that overview is under **Related concepts** below.

## 20 Example REH file {#20 .section}

The reports for an REH file and RTH file are identical in format, except the **REH** file has "**Extract**" in the heading and the **RTH** file as "**Format**" in the heading.

An example of an MR71 Report for an **REH** file is below:

![](images/MR71RPT_REH_02.GIF)

## 30 How is a REH file created? {#30 .section}

The REH file is created by **MR95** in the reference phase.

MR95 creates the REH file at the same time as creating the RED files.

For a more detailed description of RED and REH files, see topic "**RED file overview**". A link to that overview is under **Related concepts** below.

## 40 Processing for REH files {#40 .section}

![](images/REH_Phases_01.gif)

Processing of REH files is the same as processing of lookup paths:

1.  The **Join Logic Table \(JLT\)** is created in program **MR90** in the **logic** phase. The JLT includes commands for any lookup paths in the view\(s\) selected for this run of PE. If the view\(s\) contain no lookup paths, then the JLT is empty.

    For more, see these topics:

    -   "**JLT file overview**"
    -   "**Logic phase overview**"
    -   "**MR90 Logic Table Generator overview**"
    Links to these overviews are under **Related concepts** below.

2.  The **JLT** is converted into EBCDIC format in program **MR76** in the **logic** phase. This conversion covers the commands for lookup paths that are stored in the JLT.

    For more, see these topics:

    -   "**JLT file overview**"
    -   "**Logic phase overview**"
    -   "**MR76 LT to EBCDIC overview**"
    Links to these overviews are under **Related concepts** below.

3.  A report on the **JLT** is created by program **UT90** in the **reference** phase. This report shows the lookup paths contained in the JLT.

    For more, see these topics:

    -   "**JLT file overview**"
    -   "**Reference phase overview**"
    -   "**UT90 Logic Table Report overview**"
    Links to these overviews are under **Related concepts** below.

4.  Program **MR95** creates the **Reference Detail \(RED\)** and **Reference Header \(REH\)** files in the **reference** phase. The RED and REH files are essential for processing lookup paths in the extract phase.

    For more, see these topics:

    -   "**RED file overview**"
    -   "**Reference phase overview**"
    -   "**MR95 Reference and Extract overview**"
    Links to these overviews are under **Related concepts** below.

5.  Program **MR71** creates a **Reference Report \(Extract\)** that can also be called the REH Report, because the report includes the contents of the REH file. MR71 runs in the **reference** phase.

    For more, see these topics:

    -   "**Reference phase overview**"
    -   "**MR71 Reference Report overview**"
    Links to these overviews are under **Related concepts** below.

6.  Program **MR95** executes the lookups contained in the JLT using the RED and REH files. MR95 in this case runs in the **extract** phase. 

    For more, see these topics:

    -   "**Extract phase overview**"
    -   "**RED file overview**"
    -   "**MR95 Reference and Extract overview**"
    Links to these overviews are under **Related concepts** below.


Links to the runbooks for the programs mentioned above are under "**Related Reference**" below.

## 50 JCL for an REH file {#50 .section}

**MR95 in the reference phase** creates the REH file with DDNAME **GREFREH**:

|```
//GREFREH  DD DSN=&HOUPN..REH,
//            DISP=(NEW,CATLG,DELETE),
//            UNIT=&UNIT.,
//            SPACE=(TRK,(10,1),RLSE),
//            DCB=(DSORG=PS,RECFM=FB,LRECL=100)
```

|

For REH files, always use the parameters **DSORG=PS, RECFM=FB, LRECL=100**. 

**MR95 in the extract phase** reads the REH file using DDNAME **MR95REH**:

|```
//MR95REH  DD DSN=&HISPN..REH,
//            DISP=SHR              
```

|

## 60 COBOL copybook member for REH file {#60 .section}

The COBOL layout of the REH file is given in copybook member **GVBRHRL**. Look for this member in the SAFR copybook dataset in your company.

The field that indicates the RED file number is **RH-EXTR-FILE-NBR**.

## 100 Need more on this page? {#100 .section}

If you need more details to be added to this page, please email **AskSAFR@us.ibm.com** .

**Parent topic:**[SAFR overviews](../html/AAR450Overviews.md)

